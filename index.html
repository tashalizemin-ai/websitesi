
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aka Yapı – Taş Halı & Mekanik Cephe</title>
  <meta name="description" content="Profesyonel taş halı ve mekanik cephe uygulamaları. Usta ekip, şeffaf fiyat, zamanında teslim.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --bg:#111; --text:#222; --muted:#666; --chip:#f5f5f5; --chipA:#111; --chipAT:#fff; }
    *{box-sizing:border-box}
    body{margin:0;font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;color:var(--text);background:#fff;line-height:1.6}
    header{background:var(--bg);color:#fff;padding:22px 16px;text-align:center}
    header h1{margin:0 0 4px 0;font-size:28px}
    header p{margin:0;font-size:14px;opacity:.9}
    section{max-width:1000px;margin:38px auto;padding:0 20px}
    h2{font-size:22px;margin:0 0 16px 0}
    .chips{display:flex;gap:8px;margin:10px 0 18px 0;flex-wrap:wrap}
    .chip{background:var(--chip);border-radius:999px;padding:6px 12px;font-size:13px;cursor:pointer;border:1px solid #e9e9e9}
    .chip.active{background:var(--chipA);color:var(--chipAT);border-color:var(--chipA)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
    .card{position:relative;border-radius:14px;overflow:hidden;box-shadow:0 8px 28px rgba(0,0,0,.08)}
    .card img{width:100%;height:200px;object-fit:cover;display:block}
    .badge{position:absolute;left:8px;bottom:8px;background:rgba(0,0,0,.62);color:#fff;padding:6px 10px;border-radius:999px;font-size:12px}
    footer{background:var(--bg);color:#fff;text-align:center;padding:20px}
    footer a{color:#ffcc00;text-decoration:none}
    .wa{display:inline-block;margin-top:10px;background:#25D366;color:#fff;padding:10px 16px;border-radius:8px;text-decoration:none;font-weight:600}
    .muted{color:var(--muted);font-size:14px}
    .center{display:flex;align-items:center;justify-content:center}
    .spinner{border:3px solid #eee;border-top:3px solid #999;border-radius:50%;width:26px;height:26px;animation:sp 1s linear infinite;margin-right:10px}
    @keyframes sp{to{transform:rotate(360deg)}}
  </style>
</head>
<body>
  <header>
    <h1>Aka Yapı</h1>
    <p>Taş Halı Zemin & Mekanik Cephe Sistemleri</p>
  </header>

  <section>
    <h2>Hakkımızda</h2>
    <p>Profesyonel taş halı ve mekanik cephe uygulamalarıyla mekanlarınıza değer katıyoruz.
      Usta ekip, şeffaf fiyat politikası ve zamanında teslim anlayışımızla güveninizi kazanıyoruz.</p>
  </section>

  <section id="galeri">
    <h2>Fotoğraf Galerisi</h2>

    <div class="chips">
      <button class="chip active" data-filter="all">Hepsi</button>
      <button class="chip" data-filter="tashali">Taş Halı</button>
      <button class="chip" data-filter="cephe">Mekanik Cephe</button>
    </div>

    <div id="status" class="center muted" style="margin:16px 0;">
      <div class="spinner"></div> Görseller yükleniyor…
    </div>

    <div id="grid" class="grid" hidden></div>
  </section>

  <footer>
    <p>📞 0507 764 47 21 | ✉️ <a href="mailto:info@akayapi.com">info@akayapi.com</a></p>
    <a class="wa" href="https://wa.me/905077644721" target="_blank">WhatsApp ile Teklif Al</a>
  </footer>

<script>
(async () => {
  // --- Repo adını ve sahip adını OTOMATİK algıla ---
  const ownerFromHost = location.hostname.split(".")[0]; // tashalizemin-ai
  const repoFromPath  = decodeURIComponent((location.pathname.split("/")[1] || "").trim()); // websitesi / web siteleri
  const OWNER  = ownerFromHost || "tashalizemin-ai";
  const REPO   = repoFromPath  || "websitesi";

  // Dal ismi: önce main, olmazsa master dene
  async function fetchTree(branch) {
    const url = `https://api.github.com/repos/${encodeURIComponent(OWNER)}/${encodeURIComponent(REPO)}/git/trees/${encodeURIComponent(branch)}?recursive=1`;
    const res = await fetch(url);
    if (!res.ok) return null;
    return res.json();
  }
  let tree = await fetchTree("main");
  if (!tree || !Array.isArray(tree.tree)) tree = await fetchTree("master");

  const gridEl   = document.getElementById("grid");
  const statusEl = document.getElementById("status");

  if (!tree || !Array.isArray(tree.tree)) {
    statusEl.textContent = "Görsel listesi bulunamadı.";
    return;
  }

  // Yalnız görseller
  const branch = tree.sha ? "main" : "master"; // görüntü URL'i için tahmini
  const files = tree.tree
    .filter(n => n.type === "blob" && /\.(jpe?g|png|webp)$/i.test(n.path))
    .map(n => {
      const encPath = n.path.split("/").map(encodeURIComponent).join("/");
      const src = `https://raw.githubusercontent.com/${encodeURIComponent(OWNER)}/${encodeURIComponent(REPO)}/${branch}/${encPath}`;
      return { path: n.path, name: n.path.split("/").pop(), src };
    });

  if (!files.length) {
    statusEl.textContent = "Reponuzda .jpg/.png/.webp dosyası bulunamadı.";
    return;
  }

  // Kategori tespiti
  function detectCat(p) {
    const s = p.toLowerCase();
    const tas   = /(t[aâ]ş.?hal[ıi]|stone.?carpet|resin( |-)?bound|aggregate|gravel|pebble|drive|driveway|bahce|bahçe|zemin|floor)/i.test(s);
    const cephe = /(mekanik|mechanic|facade|façade|cladding|cephe|kompozit|compact|hpl|siding|aluco)/i.test(s);
    if (tas && !cephe)  return "tashali";
    if (cephe && !tas)  return "cephe";
    if (/tashali|tas.?hali|tas-hali/.test(s)) return "tashali";
    if (/cephe|facade|cladding/.test(s))      return "cephe";
    return "tashali";
  }

  const items = files.map(f => ({...f, cat: detectCat(f.path)}));

  // Render
  gridEl.innerHTML = items.map(f => `
    <figure class="card" data-cat="${f.cat}">
      <img loading="lazy" src="${f.src}" alt="${f.cat === 'tashali' ? 'Taş Halı' : 'Mekanik Cephe'}">
      <figcaption class="badge">${f.cat === 'tashali' ? 'Taş Halı' : 'Mekanik Cephe'}</figcaption>
    </figure>
  `).join("");

  statusEl.hidden = true;
  gridEl.hidden = false;

  // Filtreler
  document.querySelectorAll(".chip").forEach(chip => {
    chip.addEventListener("click", () => {
      document.querySelectorAll(".chip").forEach(c => c.classList.remove("active"));
      chip.classList.add("active");
      const f = chip.dataset.filter;
      document.querySelectorAll(".card").forEach(card => {
        card.style.display = (f === "all" || card.dataset.cat === f) ? "" : "none";
      });
    });
  });
})();
</script>
</body>
</html>
